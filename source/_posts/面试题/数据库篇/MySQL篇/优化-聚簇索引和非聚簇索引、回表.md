---
title: 优化-聚簇索引和非聚簇索引、回表
date: 2024-10-28 23:19:55
tags:
- 面试题
- MySQL篇
categories:
- 面试题
- 数据库篇
- MySQL篇
---


+ 什么是聚簇索引，什么是非聚簇索引？
+ 什么是聚集索引，什么是二级索引（非聚集索引）
+ 什么是回表？

### 聚集索引（聚簇索引）与二级索引（非聚簇索引）
![](../../../../images/面试题/数据库篇/MySQL篇/image_8b0857c7-24bd-4904-b9e5-b719de5722a7.png)

聚集索引选取规则：

+ 如果存在主键，主键索引就是聚集索引
+ 如果不存在主键，将使用第一个唯一（UNIQUE）索引作为聚集索引
+ 如果表没有主键，也没有合适的唯一索引，则 InnoDB 会自动生成一个 rowid 作为隐藏的聚集索引



![](../../../../images/面试题/数据库篇/MySQL篇/image_04c8a431-5772-40f7-a067-b061bf1fe2a5.png)

可以看到，聚集索引叶子节点存储的是（主键值：行数据），而二级索引叶子节点存储的是（索引名：主键值）

### 回表查询
![](../../../../images/面试题/数据库篇/MySQL篇/image_bc2e6fa8-c3a1-4973-b7b1-c096c3245d4f.png)



### 面试场景
<font style="color:#DF2A3F;">🗨️</font>**<font style="color:#DF2A3F;"> 什么是聚簇索引，什么是非聚簇索引？</font>**

1. 聚簇索引（聚集索引）：数据与索引放到一块，B+树的叶子节点保存了整行数据，有且只有一个
2. 非聚簇索引（二级索引）：数据与索引分开存储，B+树的叶子节点保存对应的主键，可以有多个

<font style="color:#DF2A3F;">🗨️</font>**<font style="color:#DF2A3F;"> 知道什么是回表查询吗？</font>**

通过二级索引找到对应的主键值，再到聚集索引中查找整行数据，这个过程就是回表



> 
> **面试官:什么是聚簇索引什么是非聚簇索引?**
> 
> **候选人:**
> 
> 好的~，聚簇索引主要是指数据与索引放到一块，B+树的叶子节点保存了整行数据，有且只有一个，一般情况下主键在作为聚簇索引的
> 
> 非聚簇索引值的是数据与索引分开存储，B+树的叶子节点保存对应的主键，可以有多个，一般我们自己定义的索引都是非聚簇索引
> 
> 
> 
> **面试官:知道什么是回表查询嘛?**
> 
> 候选人:嗯，其实跟刚才介绍的聚簇索引和非聚簇索引是有关系的，回表的意思就是通过二级索引找到对应的主键值，然后再通过主键值找到聚集索引中所对应的整行数据，这个过程就是回表
> 
> 【备注:如果面试官直接问回表，则需要先介绍聚簇索引和非聚簇索引】

