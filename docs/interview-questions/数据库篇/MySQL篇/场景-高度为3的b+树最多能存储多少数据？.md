---
sidebar_position: 14
---

Mysql 的设计者为了避免每条数据都从磁盘中进行读取，所以设计了一个页结构，用于磁盘与内存之间的交互单元。存放表中数据记录的页，称为索引页或者数据页。数据页就是我们实际数据。索引页使我们的索引键值 + 我们的指针。



一个页通常是 16KB 的大小。磁盘存储数据的最小单元是扇区，一个扇区是 512 字节。因此 InnoDB 的所有数据文件(后缀为.ibd的文件)，它的大小始终都是 16384B (16k) 的整数倍。Mysql 采取的 b+ 树的结构，b+ 树上每个节点都是一个页。叶子节点存放的使我们的数据完整记录，非叶子节点存的是索引值以及页偏移量。



由于 b+ 树的结构，那么我们认为高度为 2 的时候，我们存在一个根节点和若干个叶子节点。那么我们就得到了第一个公式，高度为 2 的时候，等于我们根节点指针数 * 单个叶子节点记录行数。就是我们能存储的数据量。假设我们有一个表，主键的 id 是 bigint，bigint 长度 为 8 字节。指针的大小在 mysql 中是 6 字节。那么 8+6 等于 14 字节。一个索引页用 16*1024=16384。16384/14~=1170。那么我们一个索引页就有 1170 个索引。那么再假设我们的一行数据是1kb，那么一个页就是 16 行数据。我们用刚才的1170乘以16,那么就是 18720 记录。



那么同理高度为3的时候，我们b+树的构成是根节点+一堆非叶子节点+一堆叶子节点。非叶子节点和根节点都是我们的索引页。和之前讲的同理一个页就是1170数据。那么我们做一个乘法1170*1170*16 = 21902400 条

数据。千万级的数据。那么我们可以得到一个结论，千万级的数据，我们进行1~3次io就可以查找到我们要的数据啦!